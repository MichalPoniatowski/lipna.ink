import{r,j as a}from"./index-qRwIQYuj.js";import{S as u,a as f}from"./pagination-HioZSUEB.js";import{a as h,G as g,t as w}from"./Toasts-dbxhIJgO.js";import{P as x}from"./pagination-nrHgvG5Q.js";const y="_galleryBgr_dzjof_1",j={galleryBgr:y},I=g;let o=1,P=10,c=!1;const R=()=>{const[d,l]=r.useState([]),n=r.useRef(null),i=async()=>{try{const e=await h.get(I,{params:{page:o,per_page:P}}),s=e.data.images.docs.map(t=>({id:t._id,imageUrl:`${g+t._id}`,alt:t.image_name}));return c=e.data.images.hasNextPage,s}catch(e){return console.log("Error with fetching images from API: ",e.message),w("Bład podczas pobierania galerii. Przełąduj stronę lub spróbuj za chwilę."),[]}};r.useEffect(()=>{i().then(e=>{l(e)})},[]),r.useEffect(()=>{const e=n.current.swiper,s=()=>{e.slides.length-e.activeIndex<3&&m()};if(e)return e.on("slideChange",s),()=>{e.off("slideChange",s)}},[]);const m=async()=>{if(c){o++;const e=await i();l(s=>[...s,...e])}else return console.log("No more results"),null},p=()=>d.map(e=>a.jsx(f,{className:"swiper-slide",children:a.jsx("img",{src:e.imageUrl,alt:e.alt,className:"swiper-slide img",loading:"lazy"})},e.id));return a.jsx("div",{className:j.galleryBgr,children:a.jsx(r.Suspense,{fallback:a.jsx("div",{children:"LOADING"}),children:a.jsx(u,{slidesPerView:"auto",spaceBetween:20,pagination:{dynamicBullets:!0,clickable:!0},modules:[x],lazy:"true",className:"gallery-swiper",ref:n,children:p()})})})};export{R as default};
